exports.getPublicPublications = async () => {
  try {
    const publications = await Publications.findAll({
      where: { visibilite: 'Public' },
      include: [
        {
          model: require('../models/etudiants'),
          attributes: ['nom', 'username'],
        },
        {
          model: Fichiers,
          as: 'fichiers', // Inclure les fichiers liés à la publication
          attributes: ['nom_fichier', 'url_fichier'], // Renvoyer le nom et l'URL des fichiers
        },
      ],
    });

    return publications;
  } catch (error) {
    throw new Error(error.message);
  }
};
